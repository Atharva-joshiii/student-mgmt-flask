{% extends 'base.html' %}

{% block content %}
<div class="row">
    <div class="col-12 text-center fs-4 fst-italic">
        Student List Management
        <hr />
    </div>
    <div class="col-9">
        {% if student_list %}
        {% for student in student_list %}
        <div class="card mb-3">
            <div class="row g-0">
                <div class="col-md-2">
                    <img src="{{ url_for('static', filename='images/placeholder.png') }}"
                        class="img-fluid rounded-start" alt="...">
                </div>
                <div class="col-md-8">
                    <div class="card-body">
                        <div class="fw-bold fs-5">
                            {{ student.name }}
                        </div>
                        <div class="fst-italic">
                            {{student.regNo}} | {{student.class}}
                        </div>
                        <div>
                            <i class="fa-solid fa-envelope"></i> {{student.email}}
                        </div>
                        <div>
                            <i class="fa-solid fa-phone"></i> {{student.phone}}
                        </div>
                    </div>
                </div>
                <div class="col-md-2 d-flex align-items-center gap-2">
                    <a href="/update-student/{{student._id}}/" class="btn btn-sm btn-primary">
                        <i class="fa-solid fa-pen"></i>
                    </a>
                    <a href="/delete-student/{{student._id}}/" class="btn btn-sm btn-danger">
                        <i class="fa-solid fa-trash-can"></i>
                    </a>
                </div>
            </div>
        </div>
        {% endfor %}
        {% endif %}
    </div>
    <div class="col-3">
        <form class="mt-4" method="POST"
            action="/{{ ('update-student/'~ student._id) if student else 'add-student' }}/">
            <div class="mb-3">
                Add New Student
                <hr />
            </div>
            <div class="mb-3">
                <input type="text" name="name" id="name" class="form-control"
                    value="{{ student.name if student else '' }}" placeholder="Name" required>
            </div>
            <div class="mb-3">
                <input type="text" name="registerNumber" id="registerNumber" class="form-control"
                    value="{{ student.regNo if student else '' }}" placeholder="Register Number" required>
            </div>
            <div class="mb-3">
                <input type="text" name="class" id="class" class="form-control"
                    value="{{ student.class if student else '' }}" placeholder="Class" required>
            </div>
            <div class="mb-3">
                <input type="text" name="email" id="email" class="form-control"
                    value="{{ student.email if student else '' }}" placeholder="Email" required>
            </div>
            <div class="mb-3">
                <input type="text" name="phone" id="phone" class="form-control"
                    value="{{ student.phone if student else '' }}" placeholder="Phone" required>
            </div>
            <div class="">
                <button type="submit" class="btn btn-primary">{{ 'Update' if student else 'Add' }} Student</button>
            </div>
        </form>
    </div>
</div>

{% endblock %}